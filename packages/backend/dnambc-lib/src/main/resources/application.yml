spring:
  application:
    name: dna-backend-service
    version: 3.4.7
  profile:
    active: production
  flyway:
    enabled: ${FLYWAY_ENABLED:true}
    baseline-on-migrate: ${FLYWAY_BASELINE_ON_MIGRATE:true}
    baselineVersion: ${FLYWAY_BASELINEVERSION:0}
    schemas: ${FLYWAY_SCHEMA:public}
    
  jpa:
    database: POSTGRESQL
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        temp:
          use_jdbc_metadata_defaults: false
    hibernate:
      ddl-auto: none

  datasource:
    hikari:
      connection-timeout: 4000
    platform: postgres
    url: ${API_DB_URL:jdbc:postgresql://localhost:5432/db}
    username: ${API_DB_USER:XXXX_user}
    password: ${API_DB_PASS:XXXX_pass}
    driverClassName: org.postgresql.Driver

  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 5MB
  kafka:
    producer:
    properties:
      ssl:
        truststore:
          location: ${TRUSTSTORE_PATH:/XXXX/XXXX/truststore.jks}
          password: ${TRUSTSTORE_PASSWORD:XXXX}
          type: PKCS12
        keystore:
          location: ${KEYSTORE_PATH:/XXXX/XXXX/keystore.p12}
          password: ${KEYSTORE_PASSWORD:XXXX}
          type: PKCS12
      security:
          protocol: SSL    
  cloud:
    stream:
      default-binder: kafka
      kafka:
        binder:
          brokers: ${NAAS_BROKER:localhost:9092}   

dnadss:
  provisionSolutionuri: ${PROVSION_SOLUTION_URI:XXXX}

kafka:
  centralTopic:
    name: dnaCentralEventTopic
#DNA feature configuration allowed or not(true/false) 
dna:
  piduser: ${PID_USER:xxxx}
  feature:
      jupyternotebook: ${JUPYTER_NOTEBOOK:false}
      dataiku: ${DATAIKU:false}
      itsmm: ${ITSMM:false}
      attachmentMalwareScan: ${ATTACHMENT_MALWARE_SCAN:false}
      internal-user-enabled: ${DRD_INTERNAL_USER_ENABLED:false}
      technicalUserOnboarding: ${TECH_USER_ONBOARD:false}
      mockOauthToken: ${MOCK_OAUTH_TOKEN:XXXX}
  user:
    role: ${USER_ROLE:Admin}
    techUserPrefix: ${TECH_USER_PREFIX:XXXX}
  #Access token to access datasource bulk create from external source
  dataSource:
     bulkCreate:
        api:
           accessToken: ${DATASOURCE_BULKCREATE_API_ACCESS_TOKEN:xxxx} 
      
hasura:
  baseuri: ${HASURA_BASE_URI:xxxxx}
  token: ${HASURA_TOKEN:xxxxx}
  createTechUserUri: ${HASURA_TECHUSER_URI:xxx}
  
notification:
  email:      
      solutionNotificationPref: ${DEFAULT_EMAIL_SOLUTION_NOTIFICATION_PREF:false}
      notebookNotificationPref: ${DEFAULT_EMAIL_NOTEBOOK_NOTIFICATION_PREF:false}
      persistenceNotificationPref: ${DEFAULT_EMAIL_PERSISTENCE_NOTIFICATION_PREF:false}
      dashboardNotificationPref: ${DEFAULT_EMAIL_DASHBOARD_NOTIFICATION_PREF:false}
      dataComplianceNotificationPref: ${DEFAULT_EMAIL_DATA_COMPLIANCE_NOTIFICATION_PREF:true}
      dataProductNotificationPref: ${DEFAULT_EMAIL_DATA_PRODUCT_NOTIFICATION_PREF:true}
      chronosNotificationPref: ${DEFAULT_EMAIL_CHRONOS_NOTIFICATION_PREF:true}
      codespaceNotificationPref: ${DEFAULT_EMAIL_CODESPACE_NOTIFICATION_PREF:false}
      airflowNotificationPref: ${DEFAULT_EMAIL_AIRFLOW_NOTIFICATION_PREF:false}
      dataLakeNotificationPref: ${DEFAULT_EMAIL_DATALAKE_NOTIFICATION_PREF:false}
      dataEntryNotificationPref: ${DEFAULT_EMAIL_DATAENTRY_NOTIFICATION_PREF:false}
      useCaseOwnerNotificationPref: ${DEFAULT_EMAIL_USE_CASE_OWNER_NOTIFICATION_PREF:true}
      powerPlatformNotificationPref: ${DEFAULT_EMAIL_POWER_PLATFORM_NOTIFICATION_PREF:false}
  app:
      solutionNotificationPref: ${DEFAULT_APP_SOLUTION_NOTIFICATION_PREF:true}
      notebookNotificationPref: ${DEFAULT_APP_NOTEBOOK_NOTIFICATION_PREF:true}
      persistenceNotificationPref: ${DEFAULT_APP_PERSISTENCE_NOTIFICATION_PREF:true}
      dashboardNotificationPref: ${DEFAULT_APP_DASHBOARD_NOTIFICATION_PREF:true}
      dataComplianceNotificationPref: ${DEFAULT_APP_DATA_COMPLIANCE_NOTIFICATION_PREF:true}
      dataProductNotificationPref: ${DEFAULT_APP_DATA_PRODUCT_NOTIFICATION_PREF:true}
      chronosNotificationPref: ${DEFAULT_APP_CHRONOS_NOTIFICATION_PREF:true}      
      codespaceNotificationPref: ${DEFAULT_APP_CODESPACE_NOTIFICATION_PREF:true}
      airflowNotificationPref: ${DEFAULT_APP_AIRFLOW_NOTIFICATION_PREF:true}
      dataLakeNotificationPref: ${DEFAULT_APP_DATALAKE_NOTIFICATION_PREF:true}
      dataEntryNotificationPref: ${DEFAULT_APP_DATAENTRY_NOTIFICATION_PREF:true}
      useCaseOwnerNotificationPref: ${DEFAULT_APP_USE_CASE_OWNER_NOTIFICATION_PREF:true}
      powerPlatformNotificationPref: ${DEFAULT_APP_POWER_PLATFORM_NOTIFICATION_PREF:true}
graphql:
  servlet:
    mapping: /api/minified
    enabled: true
    corsEnabled: true
#environment: ${ENV:local}

server:
  port: 7171

#Cors Filter origin Domains  
allowedCorsOriginPatternUrl: ${CORS_ORIGIN_URL:http://*}

codeserver:
  userauth: ${CODESERVER_USERAUTH:XXXX}
  
oidc:
  provider: ${OIDC_PROVIDER:OKTA}
  token:
    issuer: ${OIDC_ISSUER:xxxxx}
    introspection:
      url: ${OIDC_TOKEN_INTROSPECTION_URL:xxxxx}
    revocation:
      url: ${OIDC_TOKEN_REVOCATION_URL:xxxxx}
  userinfo:
    url: ${OIDC_USER_INFO_URL:xxxxx}
  disabled: ${OIDC_DISABLED:true}
  clientId: ${OIDC_CLIENT_ID:xxxxx}
  clientSecret: ${OIDC_CLIENT_SECRET:xxxxx}

jwt:
  secret:
    byPassUrl: ${BYPASS_JWT_AUTHENTICATION:/api/login;/api/verifyLogin;/api/itsmmgame;/api/task-data;/api/warmup-data;/api/subscription/validate;/api/notification-preferences;/api/datasources/bulk}
    tokenExpiry: ${JWT_TOKEN_EXPIRY_TIME_IN_MIN:90}

drd:
  #DEV
  request-url: ${INTERNAL_USER_REQUEST_URL:xxxxx}
  certificate-file: ${INTERNAL_USER_CERT_FILE:xxxxx}
  certificate-pass: ${INTERNAL_USER_CERT_PASS:xxxxx}


task:
  delete:
    inactive-solutions-duration: ${INACTIVE_SOLUTION_DURATION_YRS:2} #years to check before deleting

jupyternotebook:
 baseuri: ${JUPYTER_NOTEBOOK_BASEURI:xxxxx}
 token: ${JUPYTER_NOTEBOOK_TOKEN:xxxxx}
 sleepTime: ${JUPYTER_NOTEBOOK_SLEEPTIME:2000}
 
storage:
  endpointurl: ${S3_EP_URL:xxxxxx}
  accesskey: ${S3_ACCESS_KEY:xxxxx}
  secretkey: ${S3_SECRET_KEY:xxxxx}
  bucketname: ${S3_BUCKET_NAME:xxxxx}
  maxParallelUploads: ${S3_MAX_PARALLEL_UPLOADTHREADS:20}
  minFileSize: ${S3_MIN_FILESIZE:1024}
  maxFileSize: ${S3_MAX_FILESIZE:5242880}


# Matomo Configuration
matomo:
  tracking: false
  siteId: ${MATOMO_SITE_ID:1}
  hostUrl: ${MATOMO_HOST_URL:xxxxx}

  
dataiku:
  apacCorpdir: ${APAC_CORPDIR:xxxxx}
  emeaCorpdir: ${EMEA_CORPDIR:xxxxx}
  projectsUriPath: ${DATAIKU_PROJECTS_URI_PATH:xxxxx}
  userRoleUriPath: ${DATAIKU_USER_ROLE_URI_PATH:xxxxx}
  projectPermissionUriPath: ${DATAIKU_PERMISSION_URI_PATH:xxxxx}
  production:
    uri: ${DATAIKU_PROD_URI:xxxxx}
    apiKey: ${DATAIKU_PROD_API_KEY:xxxxx}
    adminGroup: ${DATAIKU_PROD_ADMIN_GROUP:xxxxx}
    onPremiseUri: ${DATAIKU_PROD_ONPREMISE_URI:xxxxx}
    onPremiseApiKey: ${DATAIKU_PROD_ONPREMISE_API_KEY:xxxxx}
    onPremiseAdminGroup: ${DATAIKU_PROD_ONPREMISE_ADMIN_GROUP:xxxxx}
  training:
    uri: ${DATAIKU_TRAINING_URI:xxxxx}
    apiKey: ${DATAIKU_TRAINING_API_KEY:xxxxx}
    adminGroup: ${DATAIKU_TRAINING_ADMIN_GROUP:xxxxx} 
    
dashboard:
  uri: ${DASHBOARD_URI:xxxxx}       
      
avscan:
  uri: ${AVSCAN_URI:xxxxx}
  appid: ${AVSCAN_APP_ID:xxxxx}
  apiKey: ${AVSCAN_API_KEY:xxxxx} 
  subscriptionProvisionApi: ${AVSCAN_SUBSCRIPTION_PROVISION_API:/api/subscription/provision}
  scanApi: ${AVSCAN_UPLOAD_API:/api/v1/scan/upload}

swagger.headers.authorization.token: ${SWAGGER_HEADER_AUTH:XXXXXX}
management.endpoints.web.exposure.include: loggers,health
management.endpoint.loggers.enabled: true
management.endpoint.health.probes.enabled: true
management.endpoint.health.show-details: always


logging:
  service:
    environment: ${LOGGING_ENVIRONMENT:DEV}
    path: ${LOGGING_PATH:/var/log}
  level:
    com:
      daimler:
        data:
          application: INFO
          controller.ItsmmGameController: DEBUG
    org.springframework.boot.autoconfigure.logging: INFO
    com.daimler.data.controller.ItsmmGameController: DEBUG
    com.daimler.data.application.logging.ApplicationLoggingAspect: DEBUG
    org:
      springframework:
        web:
          client:
            RestTemplate: INFO
      hibernate:
        type:
          descriptor:
            sql: ERROR
      graphql:
        servlet: ERROR
teamsApi:
  team-api-baseurl: ${TEAMS_API_BASE_URI:xxxxxx}
  person-search-uri: ${PERSON_SEARCH_URI:xxxxxx}
  teams-api-resultFetchSize: ${TEAMS_API_RESULT_SIZE:xxxxxx}
  enabled: ${TEAMS_API_ENABLED:false}

