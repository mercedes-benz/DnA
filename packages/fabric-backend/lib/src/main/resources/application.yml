spring:
  mvc.pathmatch.matching-strategy: ant_path_matcher
  application:
    name: dna-fabric-workspace-service
    version: 1.3.1
  profile:
    active: production

  flyway:
    enabled: ${FLYWAY_ENABLED:false}
    baseline-on-migrate: ${FLYWAY_BASELINE_ON_MIGRATE:false}
    baselineVersion: ${FLYWAY_BASELINEVERSION:0}
    schemas: ${FLYWAY_SCHEMA:public}   
        
  jpa:
    database: POSTGRESQL
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        temp:
          use_jdbc_metadata_defaults: false
    hibernate:
      ddl-auto: none

  datasource:
    hikari:
      connection-timeout: 4000
    platform: postgres
    url: ${API_DB_URL:jdbc:postgresql://localhost:64000/dbname}
    username: ${API_DB_USER:dbuser}
    password: ${API_DB_PASS:dbpassword}
    driverClassName: org.postgresql.Driver

fabricWorkspaces:
  clientId: ${FABRIC_OAUTH_CLIENT_ID:XXXX}
  clientSecret: ${FABRIC_OAUTH_CLIENT_SECRET:XXXX}
  grantType: ${FABRIC_OAUTH_GRANT_TYPE:client_credentials}
  scope: ${FABRIC_OAUTH_SCOPE:XXXX}
  accessToken: ${FABRIC_OAUTH_ACCESS_TOKEN:XXXX}
  tokenTypeHint: ${FABRIC_OAUTH_TOKEN_TYPE_HINT:access_token}
  capacityId: ${FABRIC_CAPACITY_ID:XXXX}
  capacityName: ${FABRIC_CAPACITY_NAME:XXXX}
  capacitySku: ${FABRIC_CAPACITY_SKU:XXXX}
  capacityRegion: ${FABRIC_CAPACITY_REGION:XXXX}
  capacityState: ${FABRIC_CAPACITY_STATE:Active}
  startup.workspaceprovisioning:  ${FABRIC_WORKSPACE_PROVISION_ONSTARTUP:false}
  startup.onboardOwnersToFabricOperationsRole:  ${FABRIC_ONBOARDOWNER_FABRICROLE_ONSTARTUP:true}
  dnaGroupPrefix: ${FABRIC_ONBOARD_GROUP_PREFIX:XXXX}
  subgroupPrefix: ${FABRIC_SUB_GROUP_PREFIX:XXXX}
  shortcutNameprefix: ${FABRIC_SHORTCUT_PREFIX:XXXX}
  shortcutLocation: ${FABRIC_SHORTCUT_LOCATION:XXXX}
  gateway.id: ${FABRIC_GATEWAY_ID:XXXX}
  gateway.encryption.publickey.modulus: ${FABRIC_ENCRYPTION_PUBLICKEY_MODULUS:XXXX}
  gateway.encryption.publickey.exponent: ${FABRIC_ENCRYPTION_PUBLICKEY_EXPONENT:XXXX}
  datasource:
    credentialType: ${FABRIC_DS_CREDENTIALTYPE:Basic}
    encryptedConnection: ${FABRIC_DS_ENCRYPTEDCONN:Any}
    encryptionAlgorithm: ${FABRIC_DS_ENCRYPTEDALGO:RSA-OAEP}
  group:
    identifier:  ${FABRIC_ONBOARD_GROUP_IDENTIFIER:xxxxx}
    displayName:  ${FABRIC_ONBOARD_GROUP_DISPLAYNAME:xxxxx}
    login: ${GROUPSEARCH_LOGIN:https://login.microsoftonline.com/{tenantId}/oauth2/v2.0/token}
    clientId: ${GROUPSEARCH_CLIENTID:XXXXX}
    clientSecret: ${GROUPSEARCH_CLIENTSECRET:XXXXX}
    grantType: ${GROUPSEARCH_OAUTH_GRANT_TYPE:client_credentials}
    scope: ${GROUPSEARCH_OAUTH_SCOPE:https://graph.microsoft.com/.default}
  uri:
    login: ${FABRIC_LOGIN_URL:https://login.microsoftonline.com/{tenantId}/oauth2/v2.0/token}
    workspacesBase: ${FABRIC_WORKSPACE_URL:https://api.fabric.microsoft.com/v1/workspaces}
    capacitiesBase: ${FABRIC_CAPACITY_URL:https://api.fabric.microsoft.com/v1/capacities}
    addUserUrl: ${FABRIC_ADDUSER_URL:https://api.powerbi.com/v1.0/myorg/groups/{groupId}/users}
    lakehouseUrl: ${FABRIC_LAKEHOUSE_URL:https://api.fabric.microsoft.com/v1/workspaces/id/lakehouses}
    datasourceUrl: ${FABRIC_CREATEDATASOURCE_URL:https://api.powerbi.com/v1.0/myorg/gateways/id/datasources}
    datasourceUserUrl: ${FABRIC_DATASOURCE_ADDUSER_URL:https://api.powerbi.com/v1.0/myorg/gateways/id/datasources/connectionid/users}
    shortcutUrl: ${FABRIC_SHORTCUT_URL:https://api.fabric.microsoft.com/v1/workspaces/id/items/lakehouseid/shortcuts}
    

authoriser:
  uri: ${IDENTITY_AUTH_URI:XXXX}
  ssoUri: ${IDENTITY_SSO_URI:XXXX}
  applicationId: ${IDENTITY_AUTH_APPID:XXXX}
  community: ${IDENTITY_AUTH_COMMUNITY:XXXX1,XXXX2}
  workflowDefinitionId: ${IDENTITY_AUTH_WORKFLOW_DEF_ID:xxxx}
  dnaFabricEntitlementName: ${IDENTITY_AUTH_DNA_ENTITLEMENT_NAME:xxxx}
  dnaFabricEntitlementId: ${IDENTITY_AUTH_DNA_ENTITLEMENT_ID:xxxx}
  identityAuthLogin: ${IDENTITY_AUTH_LOGIN:XXXXX}
  identityRoleUrl: ${IDENTITY_ROLE_LINK_PREFIX:XXXX}
  clientId: ${IDENTITY_CLIENT_ID:XXXX}
  clientSecret: ${IDENTITY_CLIENT_SECRET:XXXX}
  role.fabricRoleName: ${IDENTITY_FABRIC_OPERATIONS_ROLENAME:XXXX}
  
server:
  port: 9292

#Cors Filter origin Domains  
allowedCorsOriginPatternUrl: ${CORS_ORIGIN_URL:http://*}
swagger.headers.authorization.token: ${SWAGGER_HEADER_AUTH:XXXXXX}
management.endpoints.web.exposure.include: loggers,health
management.endpoint.loggers.enabled: true
management.endpoint.health.probes.enabled: true
management.endpoint.health.show-details: always

proxy: 
  port: ${CUSTOMPROXY_PORT:1234}
  host: ${CUSTOMPROXY_HOST:XXXX}
  
logging:
  service:
    environment: ${LOGGING_ENVIRONMENT:DEV}
    path: ${LOGGING_PATH:/var/log}
  level:
    com:
      daimler:
        data:
          application: INFO
          controller.ItsmmGameController: DEBUG
    org.springframework.boot.autoconfigure.logging: INFO
    com.daimler.data.application.logging.ApplicationLoggingAspect: DEBUG
    org:
      springframework:
        web:
          client:
            RestTemplate: INFO
      hibernate:
        type:
          descriptor:
            sql: ERROR
